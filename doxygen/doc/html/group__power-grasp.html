<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>grasp: power-grasp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">grasp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">power-grasp</div>  </div>
</div><!--header-->
<div class="contents">

<p>A module that, given a 3D point cloud representing an object, finds the best position on the object where the hand should be placed to obtain a successful power grasp.  
<a href="#details">More...</a></p>
<p>A module that, given a 3D point cloud representing an object, finds the best position on the object where the hand should be placed to obtain a successful power grasp. </p>
<p>For further information:</p>
<p>I.Gori, U. Pattacini, V. Tikhanoff, G. Metta Ranking the Good Points: A Comprehensive Method for Humanoid Robots to Grasp Unknown Objects In Proceedings of IEEE International Conference on Advanced Robotics (ICAR), 2013.</p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>This module, given a set of 3D points, returns the best end-effector position and orientation that will lead to a successful grasp. It commands directly to the actionsRenderingEngine module, which is equipped with a dedicated function called powerGrasp. It usually takes the 3D point cloud from the object-reconstruction module.</p>
<h1><a class="anchor" id="rpc_port"></a>
Commands:</h1>
<p>The commands sent as bottles to the module port /&lt;modName&gt;/rpc are described in the following:</p>
<p><b>HELP</b> <br />
format: [help] <br />
action: a list of all the possible commands to send to the rpc port is printed.</p>
<p><b>SET_VISUALIZATION</b> <br />
format: [set visualization param] <br />
action: if param is set to on, a 3D viewer containing the reconstructed point cloud along with the chosen end-effector position and orientation is depicted. Otherwise this functionality is disabled.</p>
<p><b>SET_WINDOW</b> <br />
format: [set param1 param2] <br />
action: param1 can be x, y, w or h, and it refers respectively to the x position, the y position, the width and the height of the 3D viewer. param2 has to be set to the value that is wanted to assign.</p>
<p><b>SET_TRAIN</b> <br />
format: [set train param] <br />
action: if param is set to on, the module runs in training modality; this means that points will be chosen randomly and saved to a dedicated file for a later training stage.</p>
<p><b>SET_TESTSVM</b> <br />
format: [set testWithSVM param] <br />
action: if param is set to on, the module uses the function learned through SVM, which associate a curvature to the successful probability of the grasp. Usually this parameter is set to off, as we already know the best curvature that should be chosen for the hand of the iCub.</p>
<p><b>SET_OFFSET</b> <br />
format: [set param1 x y z] <br />
action: param1 can be offsetL, for the left arm, or offsetR, for the right arm. It sets an offset on the corresponding arm (represented by x, y and z), in case there is some error in the mapping between the eye and the arm.</p>
<p><b>SET_MODALITY</b> <br />
format: [set modality param] <br />
action: param can be set to right, left, center or top. It imposes the corresponding area of the object from which candidate end-effector positions should be chosen.</p>
<p><b>SET_FILTER</b> <br />
format: [set filter param] <br />
action: param can be set to on or off. It is usually set to on, as the stereo vision library provides noisy point clouds. A statistical outlier removal filter is usually needed to obtain clearer point clouds.</p>
<p><b>SET_WRITE</b> <br />
format: [set write param] <br />
action: param can be set to on or off. If it is set to on, the current point cloud is saved in the path specified in the config file.</p>
<p><b>BLOCK</b> <br />
format: [block param] <br />
action: param can be set to right or left. It is useful if it is wanted to force the iCub to use a specific arm. The arm can be unblocked using the command UNBLOCK.</p>
<p><b>UNBLOCK</b> <br />
format: [unblock param] <br />
action: param can be set to right or left. It serves to unblock an arm that was previously blocked using the command BLOCK.</p>
<p><b>GRASP</b> <br />
format: [grasp (x y)] "wait" <br />
action: the algorithm runs to find a good end-effector position and orientation, and sends such pose to the actionsRenderingEngine module, which executes the grasp. If the optional parameter wait is present, the grasp is computed and depicted but it is not executed. If then the user wants to execute the grasp, he has to use the command GO. Otherwise, to reset the computation, he can use the command DONT.</p>
<p><b>GO</b> <br />
format: [go] <br />
action: if the computation of the grasp was successful but the grasp has not been executed yet because the wait command has been added to GRASP, go makes the robot execute the grasp.</p>
<p><b>DONT</b> <br />
format: [dont] <br />
action: it resets all the information that has been previously computed. It is usually used when a grasp (x y) wait command has been sent, and the computed grasp is not satisfactory.</p>
<p><b>ISGRASPED</b> <br />
format: [isGrasped] <br />
action: returns ACK if the grasp has been successfully executed by ARE, otherwise returns NACK.</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries</h1>
<ul>
<li>YARP libraries.</li>
<li>objects3D library</li>
<li><a class="el" href="group__minimumBoundingBox.html">minimumBoundingBox</a> library</li>
<li>OpenCV library</li>
<li>Point Cloud Library.</li>
</ul>
<h1><a class="anchor" id="portsc_sec"></a>
Ports Created</h1>
<ul>
<li><em>/</em> &lt;modName&gt;/rpc remote procedure call. It always replies something.</li>
<li><em>/</em> &lt;modName&gt;/are/cmd:o this is the port through which end-effector position and orientation are commanded to ARE to execute the grasp.</li>
<li><em>/</em> &lt;modName&gt;/mesh:i this is the port where the module reads the point cloud.</li>
<li><em>/</em> &lt;modName&gt;/reconstruction the module sends to this port a pixel belonging to the object to be segmented and reconstructed.</li>
<li><em>/</em> &lt;modName&gt;/depth2kin:o this is the port that asks depth2kin the 3D point computed taking into account the errors between the arm and the eye.</li>
</ul>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p>The following are the options that are usually contained in the configuration file:</p>
<p>&ndash;name <em>name</em> </p><ul>
<li>specify the module name, which is <em>power-grasp</em> by default.</li>
</ul>
<p>&ndash;robot <em>robot</em> </p><ul>
<li>specify the robot that has to be used. It is icub by default.</li>
</ul>
<p>&ndash;nAngles <em>nAngles</em> </p><ul>
<li>number of angles to be analyzed to choose the best end-effector orientation.</li>
</ul>
<p>&ndash; radiusSearch <em>radiusSearch</em> </p><ul>
<li>double representing the area of the neighborhood to be searched to compute surface normals. It is usually set to the area of the robot's palm.</li>
</ul>
<p>&ndash; numberOfBestPoints <em>numberOfBestPoints</em> </p><ul>
<li>number of the best points chosen with respect to their curvature. Those points will be successively evaluated to choose the end-effector orientation.</li>
</ul>
<p>&ndash; curvature <em>curvature</em> </p><ul>
<li>best curvature that probably leads to successful grasps given the robot's palm.</li>
</ul>
<p>&ndash; handSize <em>handSize</em> </p><ul>
<li>size of the hand from the thumb to the little.</li>
</ul>
<p>&ndash; fingerSize <em>fingerSize</em> </p><ul>
<li>size of the middle finger.</li>
</ul>
<p>&ndash; path <em>path</em> </p><ul>
<li>in case the user wants to run the algorithm in simulation using an already reconstructed 3D point cloud, he can put a .ply file representing such cloud in the path directory.</li>
</ul>
<p>&ndash; fromFile <em>fromFile</em> </p><ul>
<li>if this parameter is set to true, the algorithm runs in simulation using a .ply file that contains the point cloud to be evaluated, which is in the "path" dir.</li>
</ul>
<p>&ndash; useLearning <em>useLearning</em> </p><ul>
<li>if this parameter is set to true, the lssvm previously trained will be used. Usually this parameter is set to false, as we already know which is the best curvature for the iCub's hand.</li>
</ul>
<p>&ndash; x <em>x</em> </p><ul>
<li>x position of the window that depicts the point cloud.</li>
</ul>
<p>&ndash; y <em>y</em> </p><ul>
<li>y position of the window that depicts the point cloud.</li>
</ul>
<p>&ndash; w <em>w</em> </p><ul>
<li>width of the window that depicts the point cloud.</li>
</ul>
<p>&ndash; h <em>h</em> </p><ul>
<li>height of the window that depicts the point cloud.</li>
</ul>
<p>&ndash; disableRight <em>disableRight</em> </p><ul>
<li>if the user wants to disable the right arm from the beginning (for instance if the robot has the right arm broken, so the cartesian interface cannot be opened), this parameter should be present in the config file. If it is not present, the right arm will not be disabled.</li>
</ul>
<p>&ndash; disableLeft <em>disableLeft</em> </p><ul>
<li>if the user wants to disable the left arm from the beginning (for instance if the robot has the left arm broken, so the cartesian interface cannot be opened), this parameter should be present in the config file. If it is not present, the left arm will not be disabled.</li>
</ul>
<p>&ndash; offsetR <em>offsetR</em> </p><ul>
<li>it is possible to set an offset to compensate the error between the right arm and the eye.</li>
</ul>
<p>&ndash; offsetL <em>offsetL</em> </p><ul>
<li>it is possible to set an offset to compensate the error between the left arm and the eye.</li>
</ul>
<p>&ndash; outputDir <em>outputDir</em> </p><ul>
<li>the folder where point clouds will be saved.</li>
</ul>
<p>&ndash; lssvm <em></em> </p><ul>
<li>a group of parameters as they are returned by the learningMachine library in icub-main.</li>
</ul>
<h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Windows, Linux</p>
<dl class="section author"><dt>Author</dt><dd>Ilaria Gori </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
